<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Niet natuurlijke dood</title>
<style>

.node {
  fill: #ddd;
  stroke: #fff;
}

.label {
  font: 12px sans-serif;
  text-anchor: middle;
}

h1 {
	font-family: Tahoma, Geneva, sans-serif;
}

</style>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js" ></script>
<script src="http://baijs.nl/tinyscrollbar/js/jquery.tinyscrollbar.js"></script>
</head>

<body>
<h1>Doodsoorzaken bij een niet natuurlijke dood</h1>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script type="text/javascript">
		var width = 10000,
			height = 500;
		
		var color = d3.scale.category10();
		
		var svg = d3.select("body").append("svg")
			.attr("width", width)
			.attr("height", height);
		
		var partition = d3.layout.partition()
			.size([width, height])
			.value(function(d) {  console.log(d.gegevens.Waarde); return d.gegevens.Waarde; });
	
		
		d3.json("dood.json", function(error, data) {
		  var nodes = partition.nodes(data);
			
		  svg.selectAll(".node")
			  .data(nodes)
			.enter().append("rect")
			  .attr("class", "node")
			  .attr("x", function(d) { return d.x; })
			  .attr("y", function(d) { return d.y; })
			  .attr("width", function(d) { return d.dx; })
			  .attr("height", function(d) { return d.dy; })
			  .style("fill", function(d, i) {  for(var key in nodes[i].gegevens) {
			
    var value = nodes[i].gegevens["Onderwerpen_3"];
	return color(value);
};   });
		
		  svg.selectAll(".label")
			  .data(nodes.filter(function(d) { return d.dx > 15; }))
			.enter().append("text")
			  .attr("class", "label")
			  .attr("dy", ".35em")
			  .attr("transform", function(d) { return "translate(" + (d.x + d.dx / 2) + "," + (d.y + d.dy / 2) + ")rotate(90)"; })
			  .text(function(d, i) { for(var key in nodes[i].gegevens) {
    var value = nodes[i].gegevens[key];
	if (key == "Onderwerpen_3") {
	return value;
	}
}; });

svg.selectAll(".label2")
			  .data(nodes.filter(function(d) { return d.dx > 30; }))
			.enter().append("text")
			  .attr("class", "label")
			  .attr("dy", "10em")
			  .attr("transform", function(d) { return "translate(" + (d.x + d.dx / 2) + "," + (d.y + d.dy / 2) + ")rotate(0)"; })
			  .text(function(d, i) { for(var key in nodes[i].gegevens) {
    var value = nodes[i].gegevens[key];
	if (key == "Perioden") {
	return value;
	}
}; });
$("svg rect:first-child").remove();

		});


		
</script>
</body>
</html>
